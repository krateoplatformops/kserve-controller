apiVersion: ai.krateo.io/v1
kind: InferenceConfig
metadata:
  name: testdata-custom
  namespace: kserve-test
spec:
  autoDeletePolicy: None
  image: ghcr.io/krateoplatformops/kserve-krateo-runner-test:0.1.0
  kserve:
    modelName: sklearn-iris
    modelUrl: kserve-krateo-ttm-predictor.kserve-test.svc.cluster.local/v2/models/granite-timeseries-ttm-r2/infer
    modelVersion: v2
    modelInputName: past_values
  storage:
    input:
      krateo:
        api:
          endpointRef: 
            name: finops-database-handler-endpoint
            namespace: kserve-controller-system
          path: /compute/tritoninput
          verb: POST
          headers:
          - 'Accept: application/json'
          - 'Content-Type: application/json'
    output:
      custom:
        s3:
          endpointRef: 
            name: finops-database-handler-endpoint
            namespace: kserve-controller-system
          moreCustom: data
---
apiVersion: ai.krateo.io/v1
kind: InferenceRun
metadata:
  name: testdata-custom
  namespace: kserve-test
spec:
  configRef:
    name: testdata-custom
    namespace: kserve-test
  timeoutSeconds: 3600
  parameters:
    input_table_name: azuretoolkit
    output_table_name: kserve_controller_output_triton